<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="main.css">
    <link href="images/favicon.ico" rel="icon" type="image/x-icon" />
    <title>JHC_Judy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <nav>
        <ul class="menu">
            <li><a href="#home">JHC_Judy</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="portfolio.html">Portfolio</a></li>
        </ul>
    </nav>

    <section id="home">

        <div id="world">
            <script src="js/three.js"></script>
            <script>
                //THREEJS RELATED VARIABLES 

                var scene,
                    camera, fieldOfView, aspectRatio, nearPlane, farPlane,
                    gobalLight, shadowLight, backLight,
                    renderer,
                    container,
                    controls;

                //SCREEN & MOUSE VARIABLES

                var HEIGHT, WIDTH, windowHalfX, windowHalfY,
                    mousePos = {
                        x: 0,
                        y: 0
                    },
                    oldMousePos = {
                        x: 0,
                        y: 0
                    },
                    ballWallDepth = 30;


                //RORO the fish cat
                var roro;

                //INIT THREE JS, SCREEN AND MOUSE EVENTS

                function initScreenAnd3D() {

                    HEIGHT = window.innerHeight;
                    WIDTH = window.innerWidth * .95;
                    windowHalfX = WIDTH / 2;
                    windowHalfY = HEIGHT / 2;

                    scene = new THREE.Scene();
                    aspectRatio = WIDTH / HEIGHT;
                    fieldOfView = 50;
                    nearPlane = 1;
                    farPlane = 2000;
                    camera = new THREE.PerspectiveCamera(
                        fieldOfView,
                        aspectRatio,
                        nearPlane,
                        farPlane
                    );
                    camera.position.x = 0;
                    camera.position.z = 300;
                    camera.position.y = 250;
                    camera.lookAt(new THREE.Vector3(0, 60, 0));

                    renderer = new THREE.WebGLRenderer({
                        alpha: true,
                        antialias: true
                    });
                    renderer.setPixelRatio(window.devicePixelRatio);
                    renderer.setSize(WIDTH, HEIGHT);
                    renderer.shadowMapEnabled = true;

                    container = document.getElementById('world');
                    container.appendChild(renderer.domElement);

                    window.addEventListener('resize', handleWindowResize, false);
                    document.addEventListener('mousemove', handleMouseMove, false);
                    document.addEventListener('touchmove', handleTouchMove, false);

                }

                function handleWindowResize() {
                    HEIGHT = window.innerHeight;
                    WIDTH = window.innerWidth * .95;
                    windowHalfX = WIDTH / 2;
                    windowHalfY = HEIGHT / 2;
                    renderer.setSize(WIDTH, HEIGHT);
                    camera.aspect = WIDTH / HEIGHT;
                    camera.updateProjectionMatrix();
                }

                function handleMouseMove(event) {
                    mousePos = {
                        x: event.clientX,
                        y: event.clientY
                    };
                }

                function handleTouchMove(event) {
                    if (event.touches.length == 1) {
                        event.preventDefault();
                        mousePos = {
                            x: event.touches[0].pageX,
                            y: event.touches[0].pageY
                        };
                    }
                }

                function createLights() {
                    globalLight = new THREE.HemisphereLight(0xffffff, 0xffffff, .5)

                    shadowLight = new THREE.DirectionalLight(0xffffff, .9);
                    shadowLight.position.set(200, 200, 200);
                    shadowLight.castShadow = true;
                    shadowLight.shadowDarkness = .2;
                    shadowLight.shadowMapWidth = shadowLight.shadowMapHeight = 2048;

                    backLight = new THREE.DirectionalLight(0xffffff, .4);
                    backLight.position.set(-100, 100, 100);
                    backLight.castShadow = true;
                    backLight.shadowDarkness = .1;
                    backLight.shadowMapWidth = shadowLight.shadowMapHeight = 2048;

                    scene.add(globalLight);
                    scene.add(shadowLight);
                    scene.add(backLight);
                }

                function createFloor() {
                    floor = new THREE.Mesh(new THREE.PlaneBufferGeometry(1000, 1000), new THREE.MeshBasicMaterial({
                        color: 0x1c1d22
                    }));
                    floor.rotation.x = -Math.PI / 2;
                    floor.position.y = 0;
                    floor.receiveShadow = true;
                    scene.add(floor);
                }

                function createRoro() {
                    roro = new Cat();
                    scene.add(roro.threeGroup);
                }

                function createBall() {
                    ball = new Ball();
                    scene.add(ball.threeGroup);
                }

                // FISH RELATED CODE


                var woolNodes = 10,
                    woolSegLength = 2,
                    gravity = -1.5,
                    accuracy = 1;


                Ball = function() {

                    var blueMat = new THREE.MeshLambertMaterial({
                        color: 0x27BCC3,
                        shading: THREE.FlatShading
                    });

                    var stringMat = new THREE.LineBasicMaterial({
                        color: 0xF9EEE4,
                        linewidth: 3
                    });

                    this.threeGroup = new THREE.Group();
                    this.ballRay = 15;

                    this.verts = [];

                    // string
                    var stringGeom = new THREE.Geometry();

                    for (var i = 0; i < woolNodes; i++) {
                        var v = new THREE.Vector3(0, -i * woolSegLength, 0);
                        stringGeom.vertices.push(v);

                        var woolV = new WoolVert();
                        woolV.x = woolV.oldx = v.x;
                        woolV.y = woolV.oldy = v.y;
                        woolV.z = 0;
                        woolV.fx = woolV.fy = 0;
                        woolV.isRootNode = (i == 0);
                        woolV.vertex = v;
                        if (i > 0) woolV.attach(this.verts[(i - 1)]);
                        this.verts.push(woolV);

                    }
                    this.string = new THREE.Line(stringGeom, stringMat);

                    // fish body
                    var fheadGeom = new THREE.CylinderGeometry(1, 7, 10, 32);
                    this.body = new THREE.Mesh(fheadGeom, blueMat);
                    var fbodyGeom = new THREE.CylinderGeometry(7, 7, 10, 32);
                    this.fbody = new THREE.Mesh(fbodyGeom, blueMat);
                    this.fbody.position.y = -10;
                    var flegGeom = new THREE.CylinderGeometry(7, 1, 10, 32);
                    this.fleg = new THREE.Mesh(flegGeom, blueMat);
                    this.fleg.position.y = -20;
                    var ftailGeom = new THREE.CylinderGeometry(1, 5, 10, 32);
                    this.ftail = new THREE.Mesh(ftailGeom, blueMat);
                    this.ftail.position.y = -30;

                    this.body.add(this.fbody);
                    this.body.add(this.fleg);
                    this.body.add(this.ftail);

                    this.threeGroup.add(this.string);
                    this.threeGroup.add(this.body);

                    //                    this.threeGroup.traverse(function(object) {
                    //                        if (object instanceof THREE.Mesh) {
                    //                            object.castShadow = true;
                    //                            object.receiveShadow = true;
                    //                        }
                    //                    });

                }

                Cat = function() {
                    this.threeGroup = new THREE.Group();

                    var yellowMat = new THREE.MeshLambertMaterial({
                        color: 0xfdd276,
                        shading: THREE.FlatShading
                    });

                    var pinkMat = new THREE.MeshLambertMaterial({
                        color: 0xe0877e, //0xe0a79f, 
                        shading: THREE.FlatShading
                    });

                    var redMat = new THREE.MeshLambertMaterial({
                        color: 0x630d15,
                        shading: THREE.FlatShading
                    });

                    var whiteMat = new THREE.MeshLambertMaterial({
                        color: 0xffffff,
                        shading: THREE.FlatShading
                    });

                    var blackMat = new THREE.MeshLambertMaterial({
                        color: 0x111111,
                        shading: THREE.FlatShading
                    });
                    var brownMat = new THREE.MeshLambertMaterial({
                        color: 0x2e2019, //0x4b342a, 
                        shading: THREE.FlatShading
                    });

                    var orangeMat = new THREE.MeshLambertMaterial({
                        color: 0xC37127,
                        shading: THREE.FlatShading
                    });

                    this.handHeight = 10;
                    this.bodyHeight = 70;
                    this.armHeight = ((this.bodyHeight * 3 / 5) - this.handHeight) / 2;
                    this.faceHeight = 25;
                    this.shouldersPosition = new THREE.Vector3(0, this.armHeight * 2 + this.handHeight, 0);
                    this.isAttacking = false;
                    this.isFootReplacing = false;
                    this.isBlinking = false;
                    this.footUsed = "left";
                    this.transferPower = {
                        x: 0,
                        y: 0
                    };


                    // body

                    this.body = new THREE.Group();

                    // torso

                    var torsoGeom = new THREE.CylinderGeometry(0, 26, this.bodyHeight, 3, 1);
                    this.torso = new THREE.Mesh(torsoGeom, brownMat);
                    this.torso.geometry.applyMatrix(new THREE.Matrix4().makeRotationY(Math.PI / 3));
                    this.torso.geometry.applyMatrix(new THREE.Matrix4().makeTranslation(0, -this.bodyHeight / 2, 0));

                    // chest

                    var chestGeom = new THREE.CylinderGeometry(6, 15, 50, 9);
                    chestGeom.applyMatrix(new THREE.Matrix4().makeRotationY(Math.PI / 3));
                    chestGeom.applyMatrix(new THREE.Matrix4().makeScale(1, 1, .3));
                    this.chest = new THREE.Mesh(chestGeom, whiteMat);
                    this.chest.position.set(0, -35, 10);

                    // head
                    this.head = new THREE.Group();

                    var faceGeom = new THREE.SphereGeometry(this.faceHeight, 9, 95);
                    this.face = new THREE.Mesh(faceGeom, brownMat);

                    this.torso.add(this.chest);


                    var skewMatrixBody = new THREE.Matrix4();
                    skewMatrixBody.set(1, 0, 0, 0,
                        0, 1, 0, 0,
                        0, 0.20, 1, 0,
                        0, 0, 0, 1);


                    this.torso.geometry.applyMatrix(skewMatrixBody);
                    this.chest.geometry.applyMatrix(skewMatrixBody);


                    this.body.add(this.torso);
                    this.body.position.y = this.bodyHeight;


                    // Whiskers
                    var whiskerGeom = new THREE.BoxGeometry(26, .4, .4);

                    this.whisker1 = new THREE.Mesh(whiskerGeom, whiteMat);
                    this.whisker1.geometry.applyMatrix(new THREE.Matrix4().makeTranslation(-7, 0, 0));
                    this.whisker1.position.set(-4, 8, 18);
                    this.whisker1.rotation.z = Math.PI / 12;

                    this.whisker2 = this.whisker1.clone();
                    this.whisker2.position.y = 6;

                    this.whisker3 = this.whisker1.clone();
                    this.whisker3.position.y = 4;

                    this.whisker4 = this.whisker1.clone();
                    this.whisker4.rotation.z = Math.PI - Math.PI / 12;
                    this.whisker4.position.x = -this.whisker1.position.x;

                    this.whisker5 = this.whisker4.clone();
                    this.whisker5.position.y = this.whisker2.position.y;

                    this.whisker6 = this.whisker4.clone();
                    this.whisker6.position.y = this.whisker3.position.y;

                    this.head.add(this.whisker1);
                    this.head.add(this.whisker2);
                    this.head.add(this.whisker3);
                    this.head.add(this.whisker4);
                    this.head.add(this.whisker5);
                    this.head.add(this.whisker6);

                    // ears
                    var rightEarGeom = new THREE.CylinderGeometry(0, 12, 12, 3, 1);
                    rightEarGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 4, 0));
                    var leftEarGeom = rightEarGeom.clone();

                    rightEarGeom.applyMatrix(new THREE.Matrix4().makeRotationY(1));
                    rightEarGeom.applyMatrix(new THREE.Matrix4().makeScale(1, 1, .7));

                    leftEarGeom.applyMatrix(new THREE.Matrix4().makeRotationY(-1));
                    leftEarGeom.applyMatrix(new THREE.Matrix4().makeScale(1, 1, .7));



                    var skewMatrixRightEar = new THREE.Matrix4().set(1, 0.0, 0.0, 0,
                        0, 1, 0, 0, -0.5, 0.0, 1, 0,
                        0, 0, 0, 1);


                    var skewMatrixLeftEar = new THREE.Matrix4().set(1, -.5, 0, 0,
                        0, 1, 0, 0,
                        0, 0.0, 1, 0,
                        0, 0, 0, 1);

                    this.rightEar = new THREE.Mesh(rightEarGeom, brownMat);
                    this.rightEar.position.y = this.faceHeight - 6;
                    this.rightEar.position.x = -14;
                    this.rightEar.position.z = -3;
                    this.rightEar.rotation.z = Math.PI / 6;

                    this.leftEar = new THREE.Mesh(leftEarGeom, brownMat);
                    this.leftEar.position.x = -this.rightEar.position.x;
                    this.leftEar.position.z = this.rightEar.position.z;
                    this.leftEar.position.y = this.rightEar.position.y;
                    this.leftEar.rotation.z = -this.rightEar.rotation.z;


                    var rightEarInsideGeom = rightEarGeom.clone();
                    rightEarInsideGeom.applyMatrix(new THREE.Matrix4().makeScale(.5, .5, .5));
                    this.rightEarInside = new THREE.Mesh(rightEarInsideGeom, pinkMat);
                    this.rightEarInside.position.y = .5;
                    this.rightEarInside.position.x = 1;
                    this.rightEarInside.position.z = 2;

                    this.rightEar.add(this.rightEarInside);

                    var LeftEarInsideGeom = leftEarGeom.clone();
                    LeftEarInsideGeom.applyMatrix(new THREE.Matrix4().makeScale(.5, .5, .5));
                    this.leftEarInside = new THREE.Mesh(LeftEarInsideGeom, pinkMat);
                    this.leftEarInside.position.y = .5;
                    this.leftEarInside.position.x = -1;
                    this.leftEarInside.position.z = 2;

                    this.leftEar.add(this.leftEarInside);

                    // Eyes
                    var eyeGeom = new THREE.BoxGeometry(12, 4, 1);
                    this.rightEye = new THREE.Mesh(eyeGeom, yellowMat);
                    this.rightEye.position.set(-12, 15, 18);
                    this.rightEye.rotation.x = -Math.PI / 4;
                    this.rightEye.rotation.y = -Math.PI / 8;
                    this.rightEye.rotation.z = -Math.PI / 8;

                    this.leftEye = this.rightEye.clone();
                    this.leftEye.position.x = -this.rightEye.position.x;
                    this.leftEye.rotation.x = -Math.PI / 4;
                    this.leftEye.rotation.y = Math.PI / 8;
                    this.leftEye.rotation.z = Math.PI / 8;

                    // Iris
                    var irisGeom = new THREE.BoxGeometry(4, 4, 2);
                    this.rightIris = new THREE.Mesh(irisGeom, brownMat);
                    this.rightIris.position.x = 2;
                    this.rightIris.position.y = 0;
                    this.rightIris.position.z = .5;

                    this.leftIris = this.rightIris.clone();
                    this.leftIris.position.x = -this.rightIris.position.x;

                    this.rightEye.add(this.rightIris);
                    this.leftEye.add(this.leftIris);

                    // nose
                    var noseGeom = new THREE.CylinderGeometry(3, 0, 4, 4)
                    noseGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, -2, -4));

                    var skewMatrixNose = new THREE.Matrix4().set(1, 0, 0, 0,
                        0, 1, 0, 0,
                        0, -.7, 1, 1.4,
                        0, 0, 0, 1);

                    noseGeom.applyMatrix(skewMatrixNose);
                    this.nose = new THREE.Mesh(noseGeom, pinkMat);
                    this.nose.position.z = 24;
                    this.nose.position.y = 14.1;

                    // cheeks
                    var cheeksGeom = new THREE.CylinderGeometry(3, 5, 10, 32);
                    cheeksGeom.applyMatrix(new THREE.Matrix4().makeScale(1, 1, 1.4));
                    this.cheeks = new THREE.Mesh(cheeksGeom, whiteMat);
                    this.cheeks.position.set(0, 7, 20);
                    this.cheeks.rotation.y = -Math.PI / 2;

                    // mouth
                    var mouthGeom = new THREE.CylinderGeometry(5, 2, 10, 32);
                    this.mouth = new THREE.Mesh(mouthGeom, whiteMat);
                    this.mouth.position.y = -3;
                    this.mouth.position.z = 20;

                    this.head.add(this.face);
                    this.head.add(this.rightEar);
                    this.head.add(this.leftEar);
                    this.head.add(this.rightEye);
                    this.head.add(this.leftEye);
                    this.head.add(this.nose);
                    this.head.add(this.cheeks);
                    this.head.add(this.mouth);

                    this.head.position.y = this.bodyHeight - 15;
                    this.head.position.z = -5;


                    // shoulders
                    this.rightShoulder = new THREE.Group();
                    this.leftShoulder = new THREE.Group();

                    this.rightShoulder.position.set(-6, this.shouldersPosition.y, 10);
                    this.leftShoulder.position.set(6, this.shouldersPosition.y, 10);


                    // arms
                    var armGeom = new THREE.CylinderGeometry(4, 6, this.armHeight + 5, 4);
                    armGeom.applyMatrix(new THREE.Matrix4().makeRotationY(Math.PI / 4));
                    armGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, -this.armHeight / 2, 0));

                    this.rightArm = new THREE.Mesh(armGeom, orangeMat);
                    this.rightShoulder.add(this.rightArm);

                    this.leftArm = new THREE.Mesh(armGeom, brownMat);
                    this.leftShoulder.add(this.leftArm);

                    // forearms

                    var foreArmGeom = new THREE.CylinderGeometry(6, 7, this.armHeight, 4);
                    foreArmGeom.applyMatrix(new THREE.Matrix4().makeRotationY(Math.PI / 4));
                    foreArmGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, -this.armHeight / 2, 0));


                    this.rightForeArm = new THREE.Mesh(foreArmGeom, orangeMat);
                    this.rightForeArm.position.y = -this.armHeight;
                    this.rightArm.add(this.rightForeArm);

                    this.leftForeArm = new THREE.Mesh(foreArmGeom, brownMat);
                    this.leftForeArm.position.y = -this.armHeight;
                    this.leftArm.add(this.leftForeArm);

                    // foot = front foot
                    var footGeom = new THREE.BoxGeometry(10, 10, 10);
                    this.rightFoot = new THREE.Mesh(footGeom, whiteMat);
                    this.rightFoot.geometry.applyMatrix(new THREE.Matrix4().makeTranslation(0, 0, 0));
                    this.rightFoot.position.set(0, -this.armHeight - 5, 0);
                    this.rightForeArm.add(this.rightFoot);
                    this.leftFoot = this.rightFoot.clone();
                    this.leftForeArm.add(this.leftFoot);

                    //footPad
                    var footPadGeom = new THREE.BoxGeometry(8, 2, 8);
                    this.rightFootPad = new THREE.Mesh(footPadGeom, pinkMat);
                    this.rightFootPad.position.y = -4.5;
                    this.rightFoot.add(this.rightFootPad)

                    this.leftFootPad = this.rightFootPad.clone();
                    this.leftFoot.add(this.leftFootPad)

                    // knees
                    var kneeGeom = new THREE.BoxGeometry(8, 30, 30);
                    kneeGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 15, 0));

                    this.rightKnee = new THREE.Mesh(kneeGeom, brownMat);
                    this.rightKnee.rotation.y = -Math.PI / 6;
                    this.rightKnee.position.x = -14;
                    this.rightKnee.position.z = -12;

                    this.leftKnee = this.rightKnee.clone();
                    this.leftKnee.rotation.y = -this.rightKnee.rotation.y;
                    this.leftKnee.position.x = -this.rightKnee.position.x;

                    // legs = back legs
                    var legGeom = new THREE.BoxGeometry(12, 6, 4);
                    this.rightLeg = new THREE.Mesh(legGeom, whiteMat);
                    this.rightLeg.position.set(0, 3, 17);
                    this.rightKnee.add(this.rightLeg);

                    this.leftLeg = this.rightLeg.clone();
                    this.leftKnee.add(this.leftLeg);

                    // tail

                    this.tail = new THREE.Group();
                    this.tail.position.z = -36;
                    this.tail.position.y = 5;

                    var p = this.tail;
                    var currentY = 0;
                    var curentRot = 0;
                    var segHeight = 6;
                    var recScale = 1.15;

                    this.tailNSegs = 8;
                    this.tailSegements = [];

                    var tailSegGeom = new THREE.CylinderGeometry(3, 2, segHeight, 4);
                    tailSegGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, segHeight / 2, 0));


                    for (var i = 0; i < this.tailNSegs; i++) {
                        var mat = (i < this.tailNSegs - 1) ? brownMat : whiteMat;
                        var tg = tailSegGeom.clone();
                        var s = Math.pow(recScale, i);
                        tg.applyMatrix(new THREE.Matrix4().makeScale(s, s, s));
                        var t = new THREE.Mesh(tg, mat);
                        currentRot = (i == 0) ? -Math.PI / 2 : currentRot / (i * i * i);
                        t.position.y = currentY;
                        t.rotation.x = currentRot;
                        p.add(t);
                        p = t;
                        currentY = (segHeight - 2) * s;
                        currentRot =
                            this.tailSegements.push(t);
                    }

                    // stripes Head

                    var stripeGeom = new THREE.CylinderGeometry(2, 3, 15, 4);
                    var stripe0 = new THREE.Mesh(stripeGeom, orangeMat);
                    stripe0.rotation.x = -Math.PI / 3;
                    stripe0.position.x = -1.5;
                    stripe0.position.y = 20;
                    stripe0.position.z = 12;

                    var stripeGeom2 = new THREE.BoxGeometry(5, 20, 15);
                    var stripe2 = new THREE.Mesh(stripeGeom2, orangeMat);
                    stripe2.rotation.x = -Math.PI / 4;
                    stripe2.rotation.y = Math.PI / 1.5;
                    stripe2.rotation.z = -Math.PI / 40;
                    stripe2.position.x = 10;
                    stripe2.position.y = 15;
                    stripe2.position.z = 13;

                    this.head.add(stripe0);
                    this.head.add(stripe2);

                    this.threeGroup.add(this.body);
                    this.threeGroup.add(this.head);
                    this.threeGroup.add(this.rightShoulder);
                    this.threeGroup.add(this.leftShoulder);

                    this.threeGroup.add(this.rightKnee);
                    this.threeGroup.add(this.leftKnee);
                    this.threeGroup.add(this.tail);


                    this.threeGroup.traverse(function(object) {
                        if (object instanceof THREE.Mesh) {
                            object.castShadow = true;
                            object.receiveShadow = true;
                        }
                    });
                }

                Cat.prototype.updateTail = function(t) {

                    for (var i = 0; i < this.tailNSegs; i++) {
                        var angleStep = -i * .5;
                        var angleAmp = Math.PI / (30 / (i + 1));

                        var rotZ = Math.sin(t + angleStep) * angleAmp;
                        var st = this.tailSegements[i];
                        st.rotation.z = rotZ; //(rotY * i);
                    }
                }

                Cat.prototype.interactWithBall = function(ballPos) {
                    var bDir = ballPos.clone().sub(this.shouldersPosition.clone());
                    var isInDistance = bDir.length() < (this.armHeight * 2 + this.handHeight + 8) * 1.3;

                    this.lookAt(ballPos);

                    this.transferPower.x *= .8;
                    this.transferPower.y *= .8;

                    if (!this.isAttacking) {
                        if (!isInDistance) {
                            if (!this.isFootReplacing) {
                                this.isFootReplacing = true;
                                this.replaceFoot(this.footUsed);
                            }
                        } else {
                            this.lookAt(ballPos);
                            if (Math.random() > .96) {
                                this.isAttacking = true;
                                this.isFootReplacing = false;
                                this.attack(this.footUsed, ballPos, bDir);
                            } else {
                                this.isFootReplacing = false;
                                var middleVector = this.shouldersPosition.clone().add(bDir.clone().multiplyScalar(.4));
                                this.prepareAttack(this.footUsed, middleVector);
                            }
                        }
                    }


                    //                if (!this.isBlinking && Math.random() > .99) {
                    //                    this.isBlinking = true;
                    //                    this.blink();
                    //                }

                    //                if (!this.mouthMoving && Math.random() > .99) {
                    //                    this.mouthMoving = true;
                    //                    this.moveMouth();
                    //                }
                }

                Cat.prototype.lookAt = function(v) {
                    if (!this.oldTargetLookPos) this.oldTargetLookPos = new THREE.Vector3();
                    this.newTargetLookPos = v.clone();
                    this.lookPos = this.oldTargetLookPos.clone().add(this.newTargetLookPos.sub(this.oldTargetLookPos).multiplyScalar(.15));
                    this.head.lookAt(this.lookPos);
                    this.oldTargetLookPos = this.lookPos;
                }

                Cat.prototype.prepareAttack = function(side, v) {

                    var angles = getAngles(v, this.rightShoulder.position, this.armHeight);
                    //this.updateArm(side, angles, 1, null);
                }

                Cat.prototype.attack = function(side, v, direction) {
                    _this = this;
                    var shoulder = (side == "right") ? this.rightShoulder : this.leftShoulder;
                    var angles = getAngles(v, shoulder.position, this.armHeight);
                    //this.updateArm(side, angles, .15, function() {
                    //                    var isInDistance = direction.length() < (_this.armHeight * 2 + _this.handHeight + 20);
                    //                    if (isInDistance) _this.transferPower = {
                    //                        x: -direction.x * (Math.random() * .5) - .1 + Math.random() * .2,
                    //                        y: -direction.y * Math.random() * .5
                    //                    };
                    //                    _this.isAttacking = false;
                    //                    //console.log("attackComplete");
                    //                });
                }



                Cat.prototype.replaceFoot = function(side) {
                    _this = this;
                    var angles = {
                        theta: 0,
                        alpha: 0,
                        beta: 0
                    };
                    //                this.updateArm(side, angles, 2, Strong.easeInOut, function() {
                    //                    _this.isFootReplacing = false;
                    //                    _this.footUsed = (_this.footUsed == "right") ? "left" : "right";
                    //                    //console.log("replaceComplete");
                    //                });
                }

                //            Cat.prototype.updateArm = function(side, angles, speed, ease, callBack) {
                //                var shoulder, arm, foreArm, foot;
                //                if (side == "right") {
                //                    shoulder = this.rightShoulder;
                //                    arm = this.rightArm;
                //                    foreArm = this.rightForeArm;
                //                    foot = this.rightFoot;
                //                } else {
                //                    shoulder = this.leftShoulder;
                //                    arm = this.leftArm;
                //                    foreArm = this.leftForeArm;
                //                    foot = this.leftFoot;
                //                }
                //                var ease = ease;
                //
                //                var TweenMax;
                //                var tFootAngle = Math.min(-angles.beta, Math.PI * 1.5);
                //
                //                TweenMax.to(shoulder.rotation, speed, {
                //                    y: angles.theta,
                //                    ease: ease
                //                });
                //                TweenMax.to(arm.rotation, speed, {
                //                    x: angles.alpha,
                //                    ease: ease
                //                });
                //                TweenMax.to(foreArm.rotation, speed, {
                //                    x: angles.beta,
                //                    ease: ease,
                //                    onComplete: callBack
                //                });
                //                TweenMax.to(foot.rotation, speed, {
                //                    x: tFootAngle,
                //                    ease: ease
                //                });
                //            }

                //            Cat.prototype.blink = function() {
                //                _this = this;
                //                TweenMax.to(this.rightEye.scale, .07, {
                //                    y: 0,
                //                    yoyo: true,
                //                    repeat: 1
                //                });
                //                TweenMax.to(this.leftEye.scale, .07, {
                //                    y: 0,
                //                    yoyo: true,
                //                    repeat: 1,
                //                    onComplete: function() {
                //                        _this.isBlinking = false;
                //                    }
                //                });
                //            }
                //
                //            Cat.prototype.moveMouth = function() {
                //                _this = this;
                //                TweenMax.to(this.mouth.rotation, .2, {
                //                    x: Math.PI / 6,
                //                    yoyo: true,
                //                    repeat: 1,
                //                    onComplete: function() {
                //                        _this.mouthMoving = false;
                //                    }
                //                });
                //            }

                function getAngles(targetPos, shoulderPos, segmentLength) {
                    var ah = segmentLength;
                    var alpha0, alpha1, alpha2;
                    var beta0, beta1;
                    var bDir = targetPos.clone().sub(shoulderPos);
                    var bDirNorm = bDir.clone().normalize();

                    var dist = bDir.length() - 15;

                    var bTargetDir = bDirNorm.clone().multiplyScalar(dist);
                    var bDirMin = (dist < ah * 2) ? bTargetDir.clone() : bDirNorm.clone().multiplyScalar(ah * 2);


                    // IK calculations
                    var theta = Math.atan2(bDirMin.x, bDirMin.z); // shoulder orientation on Y axis
                    theta = (theta < -Math.PI / 2 || theta > Math.PI / 2) ? 0 : theta;
                    var x2 = Math.sqrt(bDirMin.x * bDirMin.x + bDirMin.z * bDirMin.z); // distance projected to x axis => used to find alpha2
                    alpha2 = Math.PI / 2 - Math.atan(bDirMin.y / x2);

                    // cosine rule =>       C^2 = A^2 + B^2 - 2*A*B*cosC
                    // =>                   cosC = (A^2 + B^2 - C^2) / 2*A*B

                    var cosAlpha1 = dist / (2 * ah); // in this case A^2 = C^2 = segementLength^2, then we can simplify this formula
                    cosAlpha1 = (cosAlpha1 > 1) ? 1 : (cosAlpha1 < -1) ? -1 : cosAlpha1;

                    alpha1 = Math.acos(cosAlpha1);
                    alpha0 = (Math.PI) - (alpha1 + alpha2);
                    alpha0 = Math.max(0, alpha0);


                    cosBeta1 = (ah * ah + ah * ah - dist * dist) / (2 * ah * ah);
                    cosBeta1 = (cosBeta1 < -1) ? -1 : (cosBeta1 > 1) ? 1 : cosBeta1;
                    beta1 = Math.acos(cosBeta1);
                    beta0 = Math.PI - beta1;
                    beta0 = Math.min(beta0, Math.PI * 2 / 3);

                    return {
                        theta: theta,
                        alpha: -alpha0,
                        beta: -beta0
                    };
                }


                WoolVert = function() {
                    this.x = 0;
                    this.y = 0;
                    this.z = 0;
                    this.oldx = 0;
                    this.oldy = 0;
                    this.fx = 0;
                    this.fy = 0;
                    this.isRootNode = false;
                    this.constraints = [];
                    this.vertex = null;
                }


                WoolVert.prototype.update = function() {
                    var wind = 0; //.1+Math.random()*.5;
                    this.add_force(wind, gravity);

                    nx = this.x + ((this.x - this.oldx) * .9) + this.fx;
                    ny = this.y + ((this.y - this.oldy) * .9) + this.fy;
                    this.oldx = this.x;
                    this.oldy = this.y;
                    this.x = nx;
                    this.y = ny;

                    this.vertex.x = this.x;
                    this.vertex.y = this.y;
                    this.vertex.z = this.z;

                    this.fy = this.fx = 0
                }

                WoolVert.prototype.attach = function(point) {
                    this.constraints.push(new Constraint(this, point));
                };

                WoolVert.prototype.add_force = function(x, y) {
                    this.fx += x;
                    this.fy += y;
                };

                Constraint = function(p1, p2) {
                    this.p1 = p1;
                    this.p2 = p2;
                    this.length = woolSegLength;
                };

                Ball.prototype.update = function(posX, posY, posZ) {

                    var i = accuracy;

                    while (i--) {

                        var nodesCount = woolNodes;

                        while (nodesCount--) {

                            var v = this.verts[nodesCount];

                            if (v.isRootNode) {
                                v.x = posX;
                                v.y = posY;
                                v.z = posZ;
                            } else {

                                var constraintsCount = v.constraints.length;

                                while (constraintsCount--) {

                                    var c = v.constraints[constraintsCount];

                                    var diff_x = c.p1.x - c.p2.x,
                                        diff_y = c.p1.y - c.p2.y,
                                        dist = Math.sqrt(diff_x * diff_x + diff_y * diff_y),
                                        diff = (c.length - dist) / dist;

                                    var px = diff_x * diff * .5;
                                    var py = diff_y * diff * .5;

                                    c.p1.x += px;
                                    c.p1.y += py;
                                    c.p2.x -= px;
                                    c.p2.y -= py;
                                    c.p1.z = c.p2.z = posZ;
                                }

                                if (nodesCount == woolNodes - 1) {
                                    this.body.position.x = this.verts[nodesCount].x;
                                    this.body.position.y = this.verts[nodesCount].y;
                                    this.body.position.z = this.verts[nodesCount].z;

                                    this.body.rotation.z += (v.y <= this.ballRay) ? (v.oldx - v.x) / 10 : Math.min(Math.max(diff_x / 2, -.1), .1);
                                }
                            }

                            if (v.y < this.ballRay) {
                                v.y = this.ballRay;
                            }
                        }
                    }

                    nodesCount = woolNodes;
                    while (nodesCount--) this.verts[nodesCount].update();

                    this.string.geometry.verticesNeedUpdate = true;


                }

                Ball.prototype.receivePower = function(tp) {
                    this.verts[woolNodes - 1].add_force(tp.x, tp.y);
                }

                // Enf of the code inspired by dissmulate


                // Make everything work together :

                var t = 0;

                function loop() {
                    render();

                    t += .05;
                    roro.updateTail(t);

                    var ballPos = getBallPos();
                    ball.update(ballPos.x, ballPos.y, ballPos.z);
                    ball.receivePower(roro.transferPower);
                    roro.interactWithBall(ball.body.position);

                    requestAnimationFrame(loop);
                }


                function getBallPos() {
                    var vector = new THREE.Vector3();

                    vector.set(
                        (mousePos.x / window.innerWidth) * 2 - 1, -(mousePos.y / window.innerHeight) * 2 + 1,
                        0.1);

                    vector.unproject(camera);
                    var dir = vector.sub(camera.position).normalize();
                    var distance = (ballWallDepth - camera.position.z) / dir.z;
                    var pos = camera.position.clone().add(dir.multiplyScalar(distance));
                    return pos;
                }

                function render() {
                    if (controls) controls.update();
                    renderer.render(scene, camera);
                }

                window.addEventListener('load', init, false);

                function init(event) {
                    initScreenAnd3D();
                    createLights();
                    createFloor()
                    createRoro();
                    createBall();
                    loop();
                }

            </script>
        </div>
    </section>

    <section id="about" class="pitch">
        <img id="juju" src="images/Juju/juju.gif">
        <div id="intro">
            <b style="color: white;
    text-shadow: 1px 1px 2px black, 0 0 25px #7affe9, 0 0 5px #7affe9;">JHC_JUDY</b>, born in Taiwan, is a multidisciplinary artist who passionately weaves traditional art forms with cutting-edge technology. She holds a B.S. in Computer Science and Studio Arts with Honors from Stony Brook University, where she also minored in Digital Arts. Her distinctive fusion of art and technology has earned her recognition in various hackathons and award competitions, including Audience Choice - Best in Show at the Gramercy Art Show, the Gabriel Award for Excellence in Painting, SBUHacks - Best Game Dev, Hack@CEWIT - VR Best Dev, and Hackfeat - 1st Place. Judy's work stands as a testament to her ability to push the boundaries of what is possible in art and technology. She is continuously striving to improve her skills and expand her creative horizons.
            <br>
            <br>
            <br>
            <br>
            "As an artist, my work serves as an extension of myself and a means of expression. Each piece I create is a visual diary, a conversation with my inner self, where emotions, experiences, and thoughts are transformed into tangible forms. Through color, texture, form, and the interplay of various mediums, I strive to encapsulate the fleeting moments of daily life, those small, often overlooked instances that carry deep significance. My art is not just a reflection of the world around me, but an act of preserving the beauty found in the ephemeral, and a reminder to pause and appreciate the transient wonders that shape our existence."
        </div>
        <span style="display:block; height: 80px;"></span>
        <h1>Awards</h1><br>
        <p style="text-align: left;">
            <u>2024</u><br><br>
            &emsp; ✥ Red Dot Award, The Art Students League of New York<br><br>
            &emsp; ✥ Audience Choice - Best in Show, Gramercy Art Show<br><br>
            <u>2023</u><br><br>
            &emsp; ✥ Blue Dot Award, The Art Students League of New York<br><br>
            <u>2019</u><br><br>
            &emsp; ✥ Gabriel Award for Excellence in Painting, Stony Brook University<br><br>
            &emsp; ✥ Award of Honor, Stony Brook University<br><br>
            <u>2018</u><br><br>
            &emsp; ✥ <a href="https://devpost.com/software/flap-flap-revolution">SBUHacks – Best Game Dev🔗</a><br><br>
            &emsp; ✥ <a href="https://devpost.com/software/unitychan-cewit2018">Hack@CEWIT – VR Best Dev🔗</a><br><br>
            &emsp; ✥ Staller Center Awards for Excellence, Stony Brook University<br><br>
            <u>2016</u><br><br>
            &emsp; ✥ <a href="https://web.archive.org/web/20210724034323/http://www.hackfeat.com/index.html">Hackfeat – Best Augmentation of the Human Body (1st Place)🔗</a></p>
        <span style="display:block; height: 80px;"></span>
        <h1>Art Shows</h1><br>
        <p style="text-align: left;">
            <b>&#127912 Solo Shows</b><br><br>
            <u>2019</u><br><br>
            &emsp; ✥ Studio Arts Honors Solo Show, Stony Brook University,Stony Brook, NY<br><br>
            <b>&#127912 Group Shows</b><br><br>
            <u>2024</u><br><br>
            &emsp; ✥ TW Art Book Lab, Nunu Fine Art, New York, NY<br><br>
            &emsp; ✥ Juried Selection Exhibition, Gallery OneTwentyEight, New York, NY<br><br>
            &emsp; ✥ The Art Students League of New York Annual Student Art Show, Phyllis Harrison Mason Gallery, New York, NY<br><br>
            &emsp; ✥ Gramercy Art Show, Salmagundi Club of New York, New York, NY<br><br>
            &emsp; ✥ Where Do We Come From Where Do We Go?, Goethe-Institut Boston, Boston, MA<br><br>
            <u>2023</u><br><br>
            &emsp; ✥ The Art Students League of New York Annual Student Art Show, Phyllis Harrison Mason Gallery, New York, NY<br><br>
            <u>2022</u><br><br>
            &emsp; ✥ The Art Students League of New York Annual Student Art Show, Phyllis Harrison Mason Gallery, New York, NY<br><br>
            &emsp; ✥ 5th Annual Spirituality, Health, and the Artist Exhibit, Mount Sinai Hospital, New York, NY<br><br>
            <u>2019</u><br><br>
            &emsp; ✥ Senior Art Show, Stony Brook University, Stony Brook, NY<br><br>
            <u>2018</u><br><br>
            &emsp; ✥ Through the Lenses Art Show, Stony Brook University, Stony Brook, NY<br><br>
            &emsp; ✥ Sunwood Art Show, Stony Brook University, Stony Brook, NY<br><br>
            <u>2017</u><br><br>
            &emsp; ✥ Sunwood Art Show, Stony Brook University, Stony Brook, NY<br><br>
            &emsp; ✥ Jefferson’s Ferry Art Show, South Setauket, NY
            <br><br>
        </p>
    </section>

    <!--
    <div class="about" id="bg">

                <img class="me" src="images/judy.JPG">
        <div class="overlay">

            <div class="text">
                <div class="name">JHC_Judy</div>
                Art • Technology
            </div>
        </div>

    </div>
-->

    <div class="footer">
        <div class="social"><a href="https://www.instagram.com/jhc_judy/" class="fa fa-instagram"></a></div>
        <!--        <div class="social"><a href="https://www.linkedin.com/in/judy-chen-348558155/" class="fa fa-linkedin"></a></div>-->
        <div class="social"><a href="https://github.com/jhc-judy" class="fa fa-github"></a></div>
        <br><br>
        <div class="content">juhschen@gmail.com</div>
        <br>
    </div>

    <!--
    <script src="js/three.r92.min.js"></script>
    <script src="js/vanta.birds.min.js"></script>
    <script>
        VANTA.BIRDS({
            el: "#bg",
            backgroundColor: 0x1c1d22,
            color1: 0x89ff,
            color2: 0xff57,
            colorMode: "lerpGradient",
            separation: 50.00,
            backgroundAlpha: 0.00
        })
    </script>
-->
</body>

</html>
